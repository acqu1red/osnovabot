{"ast":null,"code":"var _jsxFileName = \"/Users/offspring/Desktop/bot+miniapps/miniapp/src/App.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport './i18n';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst screens = {\n  main: 'main',\n  pay: 'pay',\n  confirm: 'confirm',\n  chat: 'chat',\n  admin: 'admin'\n};\nfunction App() {\n  _s();\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [screen, setScreen] = useState(screens.main);\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    // Получаем данные пользователя из Telegram WebApp\n    if (window.Telegram && window.Telegram.WebApp) {\n      var _window$Telegram$WebA;\n      const tgUser = (_window$Telegram$WebA = window.Telegram.WebApp.initDataUnsafe) === null || _window$Telegram$WebA === void 0 ? void 0 : _window$Telegram$WebA.user;\n      setUser(tgUser);\n      if (tgUser !== null && tgUser !== void 0 && tgUser.language_code) {\n        i18n.changeLanguage(tgUser.language_code.slice(0, 2));\n      }\n    }\n  }, [i18n]);\n  let content;\n  if (typeof screen === 'string') {\n    if (screen === screens.main) content = /*#__PURE__*/_jsxDEV(MainMenu, {\n      setScreen: setScreen,\n      user: user,\n      t: t\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 44\n    }, this);\n    if (screen === screens.pay) content = /*#__PURE__*/_jsxDEV(PayScreen, {\n      setScreen: setScreen,\n      user: user,\n      t: t\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 43\n    }, this);\n    if (screen === screens.chat) content = /*#__PURE__*/_jsxDEV(ChatScreen, {\n      setScreen: setScreen,\n      user: user,\n      t: t\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 44\n    }, this);\n    if (screen === screens.admin) content = /*#__PURE__*/_jsxDEV(AdminPanel, {\n      setScreen: setScreen,\n      user: user,\n      t: t\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 45\n    }, this);\n  } else if ((screen === null || screen === void 0 ? void 0 : screen.name) === 'confirm') {\n    content = /*#__PURE__*/_jsxDEV(ConfirmScreen, {\n      setScreen: setScreen,\n      user: user,\n      t: t,\n      ...screen.props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 15\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      background: '#18191c',\n      minHeight: '100vh',\n      color: '#fff',\n      borderRadius: 16,\n      padding: 24,\n      fontFamily: 'inherit'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      style: {\n        display: 'flex',\n        alignItems: 'center',\n        marginBottom: 24\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/miniappsava.png\",\n        alt: \"logo\",\n        style: {\n          width: 40,\n          height: 40,\n          borderRadius: 12,\n          marginRight: 12\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          margin: 0\n        },\n        children: \"CATALYST CLUB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), content]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"OSpRRxta0Al63RjUjpanE6RDlrY=\", false, function () {\n  return [useTranslation];\n});\n_c = App;\nfunction MainMenu({\n  setScreen,\n  user,\n  t\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      gap: 16\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setScreen('pay'),\n      style: btnStyle,\n      children: t('Оплатить доступ') || 'Оплатить доступ'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setScreen('chat'),\n      style: btnStyle,\n      children: t('Задать вопрос') || 'Задать вопрос'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"/\\u041E\\u0424\\u0415\\u0420\\u0422\\u0410.pdf\",\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      style: btnStyle,\n      children: t('Договор оферты') || 'Договор оферты'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), user && [708907063, 7365307696].includes(user.id) && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setScreen('admin'),\n      style: btnStyle,\n      children: \"\\u0410\\u0434\\u043C\\u0438\\u043D-\\u043F\\u0430\\u043D\\u0435\\u043B\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_c2 = MainMenu;\nfunction PayScreen({\n  setScreen,\n  user,\n  t\n}) {\n  _s2();\n  const [tariff, setTariff] = useState('1m');\n  const [method, setMethod] = useState('card');\n  const [email, setEmail] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [invoiceUrl, setInvoiceUrl] = useState('');\n  const tariffs = [{\n    key: '1m',\n    label: '1 месяц — 1500₽',\n    amount: 1500\n  }, {\n    key: '6m',\n    label: '6 месяцев — 8000₽',\n    amount: 8000\n  }, {\n    key: '12m',\n    label: '12 месяцев — 10000₽',\n    amount: 10000\n  }];\n  const methods = [{\n    key: 'card',\n    label: 'Картой (любая валюта)'\n  }, {\n    key: 'crypto',\n    label: 'Крипта (только 6/12 мес)'\n  }, {\n    key: 'stars',\n    label: 'Оплата в звездах Telegram'\n  }];\n\n  // Передаю invoiceUrl, тариф, email, username, method, сумму в ConfirmScreen через setScreen\n  const handlePay = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      var _data$data;\n      if (!email.match(/^[^@]+@[^@]+\\.[^@]+$/)) {\n        setError('Введите корректный email');\n        setLoading(false);\n        return;\n      }\n      const selectedTariff = tariffs.find(t => t.key === tariff);\n      if (method === 'stars') {\n        setScreen({\n          name: 'confirm',\n          props: {\n            invoiceUrl: '',\n            tariff: selectedTariff,\n            email,\n            username: (user === null || user === void 0 ? void 0 : user.username) || '',\n            method,\n            amount: selectedTariff.amount\n          }\n        });\n        setLoading(false);\n        return;\n      }\n      // Запрос на backend для создания инвойса LAVA\n      const resp = await fetch('http://localhost:8000/lava/create_invoice', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          amount: selectedTariff.amount,\n          order_id: `${user === null || user === void 0 ? void 0 : user.id}_${Date.now()}`,\n          email,\n          username: (user === null || user === void 0 ? void 0 : user.username) || '',\n          tariff,\n          method\n        })\n      });\n      const data = await resp.json();\n      if (data !== null && data !== void 0 && (_data$data = data.data) !== null && _data$data !== void 0 && _data$data.url) {\n        setScreen({\n          name: 'confirm',\n          props: {\n            invoiceUrl: data.data.url,\n            tariff: selectedTariff,\n            email,\n            username: (user === null || user === void 0 ? void 0 : user.username) || '',\n            method,\n            amount: selectedTariff.amount\n          }\n        });\n      } else {\n        setError('Ошибка создания инвойса');\n      }\n    } catch (e) {\n      setError('Ошибка оплаты');\n    }\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0430\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\u0422\\u0430\\u0440\\u0438\\u0444:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 7\n      }, this), tariffs.map(tar => /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: 'block',\n          margin: '6px 0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: \"tariff\",\n          value: tar.key,\n          checked: tariff === tar.key,\n          onChange: () => setTariff(tar.key)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), \" \", tar.label]\n      }, tar.key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\u0421\\u043F\\u043E\\u0441\\u043E\\u0431 \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 7\n      }, this), methods.map(m => /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: 'block',\n          margin: '6px 0',\n          color: tariff === '1m' && m.key === 'crypto' ? '#888' : '#fff'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: \"method\",\n          value: m.key,\n          checked: method === m.key,\n          onChange: () => setMethod(m.key),\n          disabled: tariff === '1m' && m.key === 'crypto'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this), \" \", m.label]\n      }, m.key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\u0412\\u0430\\u0448 Telegram Username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: (user === null || user === void 0 ? void 0 : user.username) || '',\n        disabled: true,\n        style: inputStyle\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Email (\\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: email,\n        onChange: e => setEmail(e.target.value),\n        style: inputStyle,\n        placeholder: \"you@email.com\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 5\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red',\n        marginBottom: 8\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 8,\n        marginTop: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setScreen('chat'),\n        style: btnStyle,\n        children: \"\\u0417\\u0430\\u0434\\u0430\\u0442\\u044C \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/\\u041E\\u0424\\u0415\\u0420\\u0422\\u0410.pdf\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        style: btnStyle,\n        children: \"\\u0414\\u043E\\u0433\\u043E\\u0432\\u043E\\u0440 \\u043E\\u0444\\u0435\\u0440\\u0442\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 8,\n        marginTop: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setScreen('main'),\n        style: btnStyle,\n        children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handlePay,\n        style: btnStyle,\n        disabled: loading,\n        children: loading ? '...' : 'Далее'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 10\n  }, this);\n}\n_s2(PayScreen, \"B4/k0JtOe8uUUPO6hv3VNrWbZ/M=\");\n_c3 = PayScreen;\nfunction ConfirmScreen({\n  setScreen,\n  user,\n  t,\n  invoiceUrl,\n  tariff,\n  email,\n  username,\n  method,\n  amount\n}) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"\\u0422\\u0430\\u0440\\u0438\\u0444:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 7\n      }, this), \" \", tariff === null || tariff === void 0 ? void 0 : tariff.label, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 36\n      }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"\\u0421\\u0443\\u043C\\u043C\\u0430:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }, this), \" \", amount, \"\\u20BD\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 30\n      }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"\\u0421\\u043F\\u043E\\u0441\\u043E\\u0431 \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 7\n      }, this), \" \", method === 'card' ? 'Картой' : method === 'crypto' ? 'Крипта' : 'Telegram Stars', /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 111\n      }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 7\n      }, this), \" @\", username, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 35\n      }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \"Email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 7\n      }, this), \" \", email]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 5\n    }, this), method === 'stars' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '16px 0',\n        color: '#ff0'\n      },\n      children: [\"\\u0414\\u043B\\u044F \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B \\u0432 \\u0437\\u0432\\u0451\\u0437\\u0434\\u0430\\u0445: \", /*#__PURE__*/_jsxDEV(\"b\", {\n        children: Math.ceil(amount / 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 31\n      }, this), \" \\u2B50 (\\u043A\\u0443\\u0440\\u0441 1 \\u0437\\u0432\\u0435\\u0437\\u0434\\u0430 \\u2248 2\\u20BD)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 84\n      }, this), \"\\u041F\\u0435\\u0440\\u0435\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0437\\u0432\\u0451\\u0437\\u0434\\u044B \\u0447\\u0435\\u0440\\u0435\\u0437 Telegram \\u0438 \\u043D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0432 \\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0443.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n      href: invoiceUrl,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      style: {\n        ...btnStyle,\n        display: 'inline-block',\n        marginBottom: 16\n      },\n      children: \"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setScreen('pay'),\n        style: btnStyle,\n        children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 182,\n    columnNumber: 10\n  }, this);\n}\n_c4 = ConfirmScreen;\nfunction ChatScreen({\n  setScreen,\n  user,\n  t\n}) {\n  _s3();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [file, setFile] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    if (!user) return;\n    fetch(`http://localhost:8000/questions?user_id=${user.id}`).then(r => r.json()).then(setMessages).catch(() => setMessages([]));\n  }, [user]);\n  const sendMessage = async () => {\n    if (!input && !file) return;\n    setLoading(true);\n    setError('');\n    let file_url = null;\n    if (file) {\n      const form = new FormData();\n      form.append('file', file);\n      try {\n        const resp = await fetch('http://localhost:8000/questions/upload', {\n          method: 'POST',\n          body: form\n        });\n        const data = await resp.json();\n        file_url = data.file_url;\n      } catch {\n        setError('Ошибка загрузки файла');\n        setLoading(false);\n        return;\n      }\n    }\n    const body = {\n      user_id: user.id,\n      username: user.username || '',\n      message: input,\n      file_url,\n      email: '',\n      is_admin: false,\n      created_at: new Date().toISOString()\n    };\n    try {\n      await fetch('http://localhost:8000/questions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(body)\n      });\n      setInput('');\n      setFile(null);\n      // Обновить сообщения\n      fetch(`http://localhost:8000/questions?user_id=${user.id}`).then(r => r.json()).then(setMessages);\n    } catch {\n      setError('Ошибка отправки');\n    }\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '70vh'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u041E\\u0431\\u0440\\u0430\\u0442\\u043D\\u0430\\u044F \\u0441\\u0432\\u044F\\u0437\\u044C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        overflowY: 'auto',\n        background: '#23272f',\n        borderRadius: 12,\n        padding: 12,\n        marginBottom: 12\n      },\n      children: [messages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#888'\n        },\n        children: \"\\u041D\\u0435\\u0442 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 33\n      }, this), messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 12,\n          textAlign: msg.answer ? 'left' : 'right'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 15,\n            color: '#fff'\n          },\n          children: msg.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), msg.file_url && /*#__PURE__*/_jsxDEV(\"a\", {\n          href: msg.file_url,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          style: {\n            color: '#0af'\n          },\n          children: \"\\u0412\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 28\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 13,\n            color: '#aaa'\n          },\n          children: new Date(msg.created_at).toLocaleString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), msg.answer && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: '#1a3',\n            color: '#fff',\n            borderRadius: 8,\n            padding: 8,\n            marginTop: 6\n          },\n          children: [\"\\u041E\\u0442\\u0432\\u0435\\u0442: \", msg.answer]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 26\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: 8,\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: input,\n        onChange: e => setInput(e.target.value),\n        style: {\n          ...inputStyle,\n          flex: 1\n        },\n        placeholder: \"\\u0412\\u0430\\u0448 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441...\",\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: e => setFile(e.target.files[0]),\n        style: {\n          color: '#fff'\n        },\n        disabled: loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        style: btnStyle,\n        disabled: loading || !input && !file,\n        children: loading ? '...' : 'Отправить'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 5\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red',\n        marginTop: 8\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setScreen('main'),\n      style: {\n        ...btnStyle,\n        marginTop: 16\n      },\n      children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 268,\n    columnNumber: 10\n  }, this);\n}\n_s3(ChatScreen, \"FEIJot9dpgU2KYpZgr1546tILgo=\");\n_c5 = ChatScreen;\nfunction AdminPanel({\n  setScreen,\n  user,\n  t\n}) {\n  _s4();\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [answer, setAnswer] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    fetch('http://localhost:8000/questions?admin=true').then(r => r.json()).then(data => {\n      // Собираем уникальных пользователей\n      const usersMap = {};\n      data.forEach(q => {\n        if (!usersMap[q.user_id]) {\n          usersMap[q.user_id] = {\n            user_id: q.user_id,\n            username: q.username\n          };\n        }\n      });\n      setUsers(Object.values(usersMap));\n    });\n  }, []);\n  useEffect(() => {\n    if (!selectedUser) return;\n    fetch(`http://localhost:8000/questions?user_id=${selectedUser.user_id}&admin=true`).then(r => r.json()).then(setMessages);\n  }, [selectedUser]);\n  const sendAnswer = async () => {\n    if (!answer || !selectedUser) return;\n    setLoading(true);\n    setError('');\n    try {\n      await fetch('http://localhost:8000/questions/answer', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user_id: selectedUser.user_id,\n          answer\n        })\n      });\n      setAnswer('');\n      // Обновить сообщения\n      fetch(`http://localhost:8000/questions?user_id=${selectedUser.user_id}&admin=true`).then(r => r.json()).then(setMessages);\n    } catch {\n      setError('Ошибка отправки');\n    }\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      height: '70vh',\n      gap: 16\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: 220,\n        background: '#23272f',\n        borderRadius: 12,\n        padding: 12,\n        overflowY: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 7\n      }, this), users.map(u => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: '8px 0',\n          cursor: 'pointer',\n          color: (selectedUser === null || selectedUser === void 0 ? void 0 : selectedUser.user_id) === u.user_id ? '#0af' : '#fff'\n        },\n        onClick: () => setSelectedUser(u),\n        children: [\"@\", u.username || u.user_id]\n      }, u.user_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 9\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        background: '#23272f',\n        borderRadius: 12,\n        padding: 12,\n        display: 'flex',\n        flexDirection: 'column'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\u0414\\u0438\\u0430\\u043B\\u043E\\u0433\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 7\n      }, this), selectedUser ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            flex: 1,\n            overflowY: 'auto',\n            marginBottom: 12\n          },\n          children: [messages.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: '#888'\n            },\n            children: \"\\u041D\\u0435\\u0442 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 39\n          }, this), messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: 12,\n              textAlign: msg.answer ? 'left' : 'right'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 15,\n                color: '#fff'\n              },\n              children: msg.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 17\n            }, this), msg.file_url && /*#__PURE__*/_jsxDEV(\"a\", {\n              href: msg.file_url,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              style: {\n                color: '#0af'\n              },\n              children: \"\\u0412\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 34\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 13,\n                color: '#aaa'\n              },\n              children: new Date(msg.created_at).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 17\n            }, this), msg.answer && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                background: '#1a3',\n                color: '#fff',\n                borderRadius: 8,\n                padding: 8,\n                marginTop: 6\n              },\n              children: [\"\\u041E\\u0442\\u0432\\u0435\\u0442: \", msg.answer]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 32\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 15\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 8,\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: answer,\n            onChange: e => setAnswer(e.target.value),\n            style: {\n              ...inputStyle,\n              flex: 1\n            },\n            placeholder: \"\\u041E\\u0442\\u0432\\u0435\\u0442 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044E...\",\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: sendAnswer,\n            style: btnStyle,\n            disabled: loading || !answer,\n            children: loading ? '...' : 'Ответить'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red',\n            marginTop: 8\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#888'\n        },\n        children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setScreen('main'),\n      style: {\n        ...btnStyle,\n        height: 40,\n        alignSelf: 'flex-start'\n      },\n      children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 350,\n    columnNumber: 10\n  }, this);\n}\n_s4(AdminPanel, \"ExBYqEQ6n0ApVJg8M+0u9YFYsmE=\");\n_c6 = AdminPanel;\nconst btnStyle = {\n  background: '#23272f',\n  color: '#fff',\n  border: 'none',\n  borderRadius: 12,\n  padding: '14px 20px',\n  fontSize: 18,\n  marginBottom: 4,\n  cursor: 'pointer',\n  marginTop: 0\n};\nconst inputStyle = {\n  background: '#23272f',\n  color: '#fff',\n  border: '1px solid #333',\n  borderRadius: 8,\n  padding: '10px 14px',\n  fontSize: 16,\n  width: '100%',\n  marginTop: 4\n};\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"MainMenu\");\n$RefreshReg$(_c3, \"PayScreen\");\n$RefreshReg$(_c4, \"ConfirmScreen\");\n$RefreshReg$(_c5, \"ChatScreen\");\n$RefreshReg$(_c6, \"AdminPanel\");","map":{"version":3,"names":["React","useEffect","useState","useTranslation","jsxDEV","_jsxDEV","Fragment","_Fragment","screens","main","pay","confirm","chat","admin","App","_s","t","i18n","screen","setScreen","user","setUser","window","Telegram","WebApp","_window$Telegram$WebA","tgUser","initDataUnsafe","language_code","changeLanguage","slice","content","MainMenu","fileName","_jsxFileName","lineNumber","columnNumber","PayScreen","ChatScreen","AdminPanel","name","ConfirmScreen","props","style","background","minHeight","color","borderRadius","padding","fontFamily","children","display","alignItems","marginBottom","src","alt","width","height","marginRight","margin","_c","flexDirection","gap","onClick","btnStyle","href","target","rel","includes","id","_c2","_s2","tariff","setTariff","method","setMethod","email","setEmail","loading","setLoading","error","setError","invoiceUrl","setInvoiceUrl","tariffs","key","label","amount","methods","handlePay","_data$data","match","selectedTariff","find","username","resp","fetch","headers","body","JSON","stringify","order_id","Date","now","data","json","url","e","map","tar","type","value","checked","onChange","m","disabled","inputStyle","placeholder","marginTop","_c3","Math","ceil","_c4","_s3","messages","setMessages","input","setInput","file","setFile","then","r","catch","sendMessage","file_url","form","FormData","append","user_id","message","is_admin","created_at","toISOString","flex","overflowY","length","msg","i","textAlign","answer","fontSize","toLocaleString","files","_c5","_s4","users","setUsers","selectedUser","setSelectedUser","setAnswer","usersMap","forEach","q","Object","values","sendAnswer","u","cursor","alignSelf","_c6","border","$RefreshReg$"],"sources":["/Users/offspring/Desktop/bot+miniapps/miniapp/src/App.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport './i18n';\n\nconst screens = {\n  main: 'main',\n  pay: 'pay',\n  confirm: 'confirm',\n  chat: 'chat',\n  admin: 'admin',\n};\n\nfunction App() {\n  const { t, i18n } = useTranslation();\n  const [screen, setScreen] = useState(screens.main);\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    // Получаем данные пользователя из Telegram WebApp\n    if (window.Telegram && window.Telegram.WebApp) {\n      const tgUser = window.Telegram.WebApp.initDataUnsafe?.user;\n      setUser(tgUser);\n      if (tgUser?.language_code) {\n        i18n.changeLanguage(tgUser.language_code.slice(0, 2));\n      }\n    }\n  }, [i18n]);\n\n  let content;\n  if (typeof screen === 'string') {\n    if (screen === screens.main) content = <MainMenu setScreen={setScreen} user={user} t={t} />;\n    if (screen === screens.pay) content = <PayScreen setScreen={setScreen} user={user} t={t} />;\n    if (screen === screens.chat) content = <ChatScreen setScreen={setScreen} user={user} t={t} />;\n    if (screen === screens.admin) content = <AdminPanel setScreen={setScreen} user={user} t={t} />;\n  } else if (screen?.name === 'confirm') {\n    content = <ConfirmScreen setScreen={setScreen} user={user} t={t} {...screen.props} />;\n  }\n  return (\n    <div style={{ background: '#18191c', minHeight: '100vh', color: '#fff', borderRadius: 16, padding: 24, fontFamily: 'inherit' }}>\n      <header style={{ display: 'flex', alignItems: 'center', marginBottom: 24 }}>\n        <img src=\"/miniappsava.png\" alt=\"logo\" style={{ width: 40, height: 40, borderRadius: 12, marginRight: 12 }} />\n        <h2 style={{ margin: 0 }}>CATALYST CLUB</h2>\n      </header>\n      {content}\n    </div>\n  );\n}\n\nfunction MainMenu({ setScreen, user, t }) {\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', gap: 16 }}>\n      <button onClick={() => setScreen('pay')} style={btnStyle}>{t('Оплатить доступ') || 'Оплатить доступ'}</button>\n      <button onClick={() => setScreen('chat')} style={btnStyle}>{t('Задать вопрос') || 'Задать вопрос'}</button>\n      <a href=\"/ОФЕРТА.pdf\" target=\"_blank\" rel=\"noopener noreferrer\" style={btnStyle}>{t('Договор оферты') || 'Договор оферты'}</a>\n      {user && [708907063, 7365307696].includes(user.id) && (\n        <button onClick={() => setScreen('admin')} style={btnStyle}>Админ-панель</button>\n      )}\n    </div>\n  );\n}\n\nfunction PayScreen({ setScreen, user, t }) {\n  const [tariff, setTariff] = useState('1m');\n  const [method, setMethod] = useState('card');\n  const [email, setEmail] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [invoiceUrl, setInvoiceUrl] = useState('');\n\n  const tariffs = [\n    { key: '1m', label: '1 месяц — 1500₽', amount: 1500 },\n    { key: '6m', label: '6 месяцев — 8000₽', amount: 8000 },\n    { key: '12m', label: '12 месяцев — 10000₽', amount: 10000 },\n  ];\n\n  const methods = [\n    { key: 'card', label: 'Картой (любая валюта)' },\n    { key: 'crypto', label: 'Крипта (только 6/12 мес)' },\n    { key: 'stars', label: 'Оплата в звездах Telegram' },\n  ];\n\n  // Передаю invoiceUrl, тариф, email, username, method, сумму в ConfirmScreen через setScreen\n  const handlePay = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      if (!email.match(/^[^@]+@[^@]+\\.[^@]+$/)) {\n        setError('Введите корректный email');\n        setLoading(false);\n        return;\n      }\n      const selectedTariff = tariffs.find(t => t.key === tariff);\n      if (method === 'stars') {\n        setScreen({\n          name: 'confirm',\n          props: {\n            invoiceUrl: '',\n            tariff: selectedTariff,\n            email,\n            username: user?.username || '',\n            method,\n            amount: selectedTariff.amount,\n          }\n        });\n        setLoading(false);\n        return;\n      }\n      // Запрос на backend для создания инвойса LAVA\n      const resp = await fetch('http://localhost:8000/lava/create_invoice', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          amount: selectedTariff.amount,\n          order_id: `${user?.id}_${Date.now()}`,\n          email,\n          username: user?.username || '',\n          tariff,\n          method,\n        })\n      });\n      const data = await resp.json();\n      if (data?.data?.url) {\n        setScreen({\n          name: 'confirm',\n          props: {\n            invoiceUrl: data.data.url,\n            tariff: selectedTariff,\n            email,\n            username: user?.username || '',\n            method,\n            amount: selectedTariff.amount,\n          }\n        });\n      } else {\n        setError('Ошибка создания инвойса');\n      }\n    } catch (e) {\n      setError('Ошибка оплаты');\n    }\n    setLoading(false);\n  };\n\n  return <div>\n    <h3>Оплата доступа</h3>\n    <div style={{ marginBottom: 12 }}>\n      <div>Тариф:</div>\n      {tariffs.map(tar => (\n        <label key={tar.key} style={{ display: 'block', margin: '6px 0' }}>\n          <input type=\"radio\" name=\"tariff\" value={tar.key} checked={tariff === tar.key} onChange={() => setTariff(tar.key)} /> {tar.label}\n        </label>\n      ))}\n    </div>\n    <div style={{ marginBottom: 12 }}>\n      <div>Способ оплаты:</div>\n      {methods.map(m => (\n        <label key={m.key} style={{ display: 'block', margin: '6px 0', color: (tariff === '1m' && m.key === 'crypto') ? '#888' : '#fff' }}>\n          <input type=\"radio\" name=\"method\" value={m.key} checked={method === m.key} onChange={() => setMethod(m.key)} disabled={tariff === '1m' && m.key === 'crypto'} /> {m.label}\n        </label>\n      ))}\n    </div>\n    <div style={{ marginBottom: 12 }}>\n      <div>Ваш Telegram Username:</div>\n      <input value={user?.username || ''} disabled style={inputStyle} />\n    </div>\n    <div style={{ marginBottom: 12 }}>\n      <div>Email (обязательно):</div>\n      <input value={email} onChange={e => setEmail(e.target.value)} style={inputStyle} placeholder=\"you@email.com\" />\n    </div>\n    {error && <div style={{ color: 'red', marginBottom: 8 }}>{error}</div>}\n    <div style={{ display: 'flex', gap: 8, marginTop: 16 }}>\n      <button onClick={() => setScreen('chat')} style={btnStyle}>Задать вопрос</button>\n      <a href=\"/ОФЕРТА.pdf\" target=\"_blank\" rel=\"noopener noreferrer\" style={btnStyle}>Договор оферты</a>\n    </div>\n    <div style={{ display: 'flex', gap: 8, marginTop: 16 }}>\n      <button onClick={() => setScreen('main')} style={btnStyle}>Назад</button>\n      <button onClick={handlePay} style={btnStyle} disabled={loading}>{loading ? '...' : 'Далее'}</button>\n    </div>\n  </div>;\n}\n\nfunction ConfirmScreen({ setScreen, user, t, invoiceUrl, tariff, email, username, method, amount }) {\n  return <div>\n    <h3>Подтверждение</h3>\n    <div style={{ marginBottom: 12 }}>\n      <b>Тариф:</b> {tariff?.label}<br />\n      <b>Сумма:</b> {amount}₽<br />\n      <b>Способ оплаты:</b> {method === 'card' ? 'Картой' : method === 'crypto' ? 'Крипта' : 'Telegram Stars'}<br />\n      <b>Username:</b> @{username}<br />\n      <b>Email:</b> {email}\n    </div>\n    {method === 'stars' ? (\n      <div style={{ margin: '16px 0', color: '#ff0' }}>\n        Для оплаты в звёздах: <b>{Math.ceil(amount / 2)}</b> ⭐ (курс 1 звезда ≈ 2₽)<br />\n        Переведите звёзды через Telegram и напишите в поддержку.\n      </div>\n    ) : (\n      <a href={invoiceUrl} target=\"_blank\" rel=\"noopener noreferrer\" style={{ ...btnStyle, display: 'inline-block', marginBottom: 16 }}>Оплатить</a>\n    )}\n    <div>\n      <button onClick={() => setScreen('pay')} style={btnStyle}>Назад</button>\n    </div>\n  </div>;\n}\n\nfunction ChatScreen({ setScreen, user, t }) {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [file, setFile] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (!user) return;\n    fetch(`http://localhost:8000/questions?user_id=${user.id}`)\n      .then(r => r.json())\n      .then(setMessages)\n      .catch(() => setMessages([]));\n  }, [user]);\n\n  const sendMessage = async () => {\n    if (!input && !file) return;\n    setLoading(true);\n    setError('');\n    let file_url = null;\n    if (file) {\n      const form = new FormData();\n      form.append('file', file);\n      try {\n        const resp = await fetch('http://localhost:8000/questions/upload', {\n          method: 'POST',\n          body: form\n        });\n        const data = await resp.json();\n        file_url = data.file_url;\n      } catch {\n        setError('Ошибка загрузки файла');\n        setLoading(false);\n        return;\n      }\n    }\n    const body = {\n      user_id: user.id,\n      username: user.username || '',\n      message: input,\n      file_url,\n      email: '',\n      is_admin: false,\n      created_at: new Date().toISOString(),\n    };\n    try {\n      await fetch('http://localhost:8000/questions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(body)\n      });\n      setInput('');\n      setFile(null);\n      // Обновить сообщения\n      fetch(`http://localhost:8000/questions?user_id=${user.id}`)\n        .then(r => r.json())\n        .then(setMessages);\n    } catch {\n      setError('Ошибка отправки');\n    }\n    setLoading(false);\n  };\n\n  return <div style={{ display: 'flex', flexDirection: 'column', height: '70vh' }}>\n    <h3>Обратная связь</h3>\n    <div style={{ flex: 1, overflowY: 'auto', background: '#23272f', borderRadius: 12, padding: 12, marginBottom: 12 }}>\n      {messages.length === 0 && <div style={{ color: '#888' }}>Нет сообщений</div>}\n      {messages.map((msg, i) => (\n        <div key={i} style={{ marginBottom: 12, textAlign: msg.answer ? 'left' : 'right' }}>\n          <div style={{ fontSize: 15, color: '#fff' }}>{msg.message}</div>\n          {msg.file_url && <a href={msg.file_url} target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#0af' }}>Вложение</a>}\n          <div style={{ fontSize: 13, color: '#aaa' }}>{new Date(msg.created_at).toLocaleString()}</div>\n          {msg.answer && <div style={{ background: '#1a3', color: '#fff', borderRadius: 8, padding: 8, marginTop: 6 }}>Ответ: {msg.answer}</div>}\n        </div>\n      ))}\n    </div>\n    <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\n      <input\n        value={input}\n        onChange={e => setInput(e.target.value)}\n        style={{ ...inputStyle, flex: 1 }}\n        placeholder=\"Ваш вопрос...\"\n        disabled={loading}\n      />\n      <input type=\"file\" onChange={e => setFile(e.target.files[0])} style={{ color: '#fff' }} disabled={loading} />\n      <button onClick={sendMessage} style={btnStyle} disabled={loading || (!input && !file)}>\n        {loading ? '...' : 'Отправить'}\n      </button>\n    </div>\n    {error && <div style={{ color: 'red', marginTop: 8 }}>{error}</div>}\n    <button onClick={() => setScreen('main')} style={{ ...btnStyle, marginTop: 16 }}>Назад</button>\n  </div>;\n}\n\nfunction AdminPanel({ setScreen, user, t }) {\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [answer, setAnswer] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    fetch('http://localhost:8000/questions?admin=true')\n      .then(r => r.json())\n      .then(data => {\n        // Собираем уникальных пользователей\n        const usersMap = {};\n        data.forEach(q => {\n          if (!usersMap[q.user_id]) {\n            usersMap[q.user_id] = { user_id: q.user_id, username: q.username };\n          }\n        });\n        setUsers(Object.values(usersMap));\n      });\n  }, []);\n\n  useEffect(() => {\n    if (!selectedUser) return;\n    fetch(`http://localhost:8000/questions?user_id=${selectedUser.user_id}&admin=true`)\n      .then(r => r.json())\n      .then(setMessages);\n  }, [selectedUser]);\n\n  const sendAnswer = async () => {\n    if (!answer || !selectedUser) return;\n    setLoading(true);\n    setError('');\n    try {\n      await fetch('http://localhost:8000/questions/answer', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ user_id: selectedUser.user_id, answer })\n      });\n      setAnswer('');\n      // Обновить сообщения\n      fetch(`http://localhost:8000/questions?user_id=${selectedUser.user_id}&admin=true`)\n        .then(r => r.json())\n        .then(setMessages);\n    } catch {\n      setError('Ошибка отправки');\n    }\n    setLoading(false);\n  };\n\n  return <div style={{ display: 'flex', height: '70vh', gap: 16 }}>\n    <div style={{ width: 220, background: '#23272f', borderRadius: 12, padding: 12, overflowY: 'auto' }}>\n      <h4>Пользователи</h4>\n      {users.map(u => (\n        <div key={u.user_id} style={{ margin: '8px 0', cursor: 'pointer', color: selectedUser?.user_id === u.user_id ? '#0af' : '#fff' }} onClick={() => setSelectedUser(u)}>\n          @{u.username || u.user_id}\n        </div>\n      ))}\n    </div>\n    <div style={{ flex: 1, background: '#23272f', borderRadius: 12, padding: 12, display: 'flex', flexDirection: 'column' }}>\n      <h4>Диалог</h4>\n      {selectedUser ? (\n        <>\n          <div style={{ flex: 1, overflowY: 'auto', marginBottom: 12 }}>\n            {messages.length === 0 && <div style={{ color: '#888' }}>Нет сообщений</div>}\n            {messages.map((msg, i) => (\n              <div key={i} style={{ marginBottom: 12, textAlign: msg.answer ? 'left' : 'right' }}>\n                <div style={{ fontSize: 15, color: '#fff' }}>{msg.message}</div>\n                {msg.file_url && <a href={msg.file_url} target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#0af' }}>Вложение</a>}\n                <div style={{ fontSize: 13, color: '#aaa' }}>{new Date(msg.created_at).toLocaleString()}</div>\n                {msg.answer && <div style={{ background: '#1a3', color: '#fff', borderRadius: 8, padding: 8, marginTop: 6 }}>Ответ: {msg.answer}</div>}\n              </div>\n            ))}\n          </div>\n          <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\n            <input\n              value={answer}\n              onChange={e => setAnswer(e.target.value)}\n              style={{ ...inputStyle, flex: 1 }}\n              placeholder=\"Ответ пользователю...\"\n              disabled={loading}\n            />\n            <button onClick={sendAnswer} style={btnStyle} disabled={loading || !answer}>\n              {loading ? '...' : 'Ответить'}\n            </button>\n          </div>\n          {error && <div style={{ color: 'red', marginTop: 8 }}>{error}</div>}\n        </>\n      ) : <div style={{ color: '#888' }}>Выберите пользователя</div>}\n    </div>\n    <button onClick={() => setScreen('main')} style={{ ...btnStyle, height: 40, alignSelf: 'flex-start' }}>Назад</button>\n  </div>;\n}\n\nconst btnStyle = {\n  background: '#23272f',\n  color: '#fff',\n  border: 'none',\n  borderRadius: 12,\n  padding: '14px 20px',\n  fontSize: 18,\n  marginBottom: 4,\n  cursor: 'pointer',\n  marginTop: 0,\n};\n\nconst inputStyle = {\n  background: '#23272f',\n  color: '#fff',\n  border: '1px solid #333',\n  borderRadius: 8,\n  padding: '10px 14px',\n  fontSize: 16,\n  width: '100%',\n  marginTop: 4,\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}