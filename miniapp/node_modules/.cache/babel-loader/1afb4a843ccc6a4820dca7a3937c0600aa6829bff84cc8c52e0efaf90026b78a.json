{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useTranslation}from'react-i18next';import'./i18n';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const screens={main:'main',pay:'pay',confirm:'confirm',chat:'chat',admin:'admin'};function App(){const{t,i18n}=useTranslation();const[screen,setScreen]=useState(screens.main);const[user,setUser]=useState(null);useEffect(()=>{// Получаем данные пользователя из Telegram WebApp\nif(window.Telegram&&window.Telegram.WebApp){var _window$Telegram$WebA;const tgUser=(_window$Telegram$WebA=window.Telegram.WebApp.initDataUnsafe)===null||_window$Telegram$WebA===void 0?void 0:_window$Telegram$WebA.user;setUser(tgUser);if(tgUser!==null&&tgUser!==void 0&&tgUser.language_code){i18n.changeLanguage(tgUser.language_code.slice(0,2));}}},[i18n]);let content;if(typeof screen==='string'){if(screen===screens.main)content=/*#__PURE__*/_jsx(MainMenu,{setScreen:setScreen,user:user,t:t});if(screen===screens.pay)content=/*#__PURE__*/_jsx(PayScreen,{setScreen:setScreen,user:user,t:t});if(screen===screens.chat)content=/*#__PURE__*/_jsx(ChatScreen,{setScreen:setScreen,user:user,t:t});if(screen===screens.admin)content=/*#__PURE__*/_jsx(AdminPanel,{setScreen:setScreen,user:user,t:t});}else if((screen===null||screen===void 0?void 0:screen.name)==='confirm'){content=/*#__PURE__*/_jsx(ConfirmScreen,{setScreen:setScreen,user:user,t:t,...screen.props});}return/*#__PURE__*/_jsxs(\"div\",{style:{background:'#18191c',minHeight:'100vh',color:'#fff',borderRadius:16,padding:24,fontFamily:'inherit'},children:[/*#__PURE__*/_jsxs(\"header\",{style:{display:'flex',alignItems:'center',marginBottom:24},children:[/*#__PURE__*/_jsx(\"img\",{src:\"/miniappsava.png\",alt:\"logo\",style:{width:40,height:40,borderRadius:12,marginRight:12}}),/*#__PURE__*/_jsx(\"h2\",{style:{margin:0},children:\"CATALYST CLUB\"})]}),content]});}function MainMenu(_ref){let{setScreen,user,t}=_ref;return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:16},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setScreen('pay'),style:btnStyle,children:t('Оплатить доступ')||'Оплатить доступ'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setScreen('chat'),style:btnStyle,children:t('Задать вопрос')||'Задать вопрос'}),/*#__PURE__*/_jsx(\"a\",{href:\"/\\u041E\\u0424\\u0415\\u0420\\u0422\\u0410.pdf\",target:\"_blank\",rel:\"noopener noreferrer\",style:btnStyle,children:t('Договор оферты')||'Договор оферты'}),user&&[708907063,7365307696].includes(user.id)&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setScreen('admin'),style:btnStyle,children:\"\\u0410\\u0434\\u043C\\u0438\\u043D-\\u043F\\u0430\\u043D\\u0435\\u043B\\u044C\"})]});}function PayScreen(_ref2){let{setScreen,user,t}=_ref2;const[tariff,setTariff]=useState('1m');const[method,setMethod]=useState('card');const[email,setEmail]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[invoiceUrl,setInvoiceUrl]=useState('');const tariffs=[{key:'1m',label:'1 месяц — 1500₽',amount:1500},{key:'6m',label:'6 месяцев — 8000₽',amount:8000},{key:'12m',label:'12 месяцев — 10000₽',amount:10000}];const methods=[{key:'card',label:'Картой (любая валюта)'},{key:'crypto',label:'Крипта (только 6/12 мес)'},{key:'stars',label:'Оплата в звездах Telegram'}];// Передаю invoiceUrl, тариф, email, username, method, сумму в ConfirmScreen через setScreen\nconst handlePay=async()=>{setLoading(true);setError('');try{var _data$data;if(!email.match(/^[^@]+@[^@]+\\.[^@]+$/)){setError('Введите корректный email');setLoading(false);return;}const selectedTariff=tariffs.find(t=>t.key===tariff);if(method==='stars'){setScreen({name:'confirm',props:{invoiceUrl:'',tariff:selectedTariff,email,username:(user===null||user===void 0?void 0:user.username)||'',method,amount:selectedTariff.amount}});setLoading(false);return;}// Запрос на backend для создания инвойса LAVA\nconst resp=await fetch('http://localhost:8000/lava/create_invoice',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({amount:selectedTariff.amount,order_id:`${user===null||user===void 0?void 0:user.id}_${Date.now()}`,email,username:(user===null||user===void 0?void 0:user.username)||'',tariff,method})});const data=await resp.json();if(data!==null&&data!==void 0&&(_data$data=data.data)!==null&&_data$data!==void 0&&_data$data.url){setScreen({name:'confirm',props:{invoiceUrl:data.data.url,tariff:selectedTariff,email,username:(user===null||user===void 0?void 0:user.username)||'',method,amount:selectedTariff.amount}});}else{setError('Ошибка создания инвойса');}}catch(e){setError('Ошибка оплаты');}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0430 \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0422\\u0430\\u0440\\u0438\\u0444:\"}),tariffs.map(tar=>/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',margin:'6px 0'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"tariff\",value:tar.key,checked:tariff===tar.key,onChange:()=>setTariff(tar.key)}),\" \",tar.label]},tar.key))]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0421\\u043F\\u043E\\u0441\\u043E\\u0431 \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B:\"}),methods.map(m=>/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',margin:'6px 0',color:tariff==='1m'&&m.key==='crypto'?'#888':'#fff'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"method\",value:m.key,checked:method===m.key,onChange:()=>setMethod(m.key),disabled:tariff==='1m'&&m.key==='crypto'}),\" \",m.label]},m.key))]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"div\",{children:\"\\u0412\\u0430\\u0448 Telegram Username:\"}),/*#__PURE__*/_jsx(\"input\",{value:(user===null||user===void 0?void 0:user.username)||'',disabled:true,style:inputStyle})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"div\",{children:\"Email (\\u043E\\u0431\\u044F\\u0437\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E):\"}),/*#__PURE__*/_jsx(\"input\",{value:email,onChange:e=>setEmail(e.target.value),style:inputStyle,placeholder:\"you@email.com\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginBottom:8},children:error}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginTop:16},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setScreen('chat'),style:btnStyle,children:\"\\u0417\\u0430\\u0434\\u0430\\u0442\\u044C \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/\\u041E\\u0424\\u0415\\u0420\\u0422\\u0410.pdf\",target:\"_blank\",rel:\"noopener noreferrer\",style:btnStyle,children:\"\\u0414\\u043E\\u0433\\u043E\\u0432\\u043E\\u0440 \\u043E\\u0444\\u0435\\u0440\\u0442\\u044B\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,marginTop:16},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setScreen('main'),style:btnStyle,children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handlePay,style:btnStyle,disabled:loading,children:loading?'...':'Далее'})]})]});}function ConfirmScreen(_ref3){let{setScreen,user,t,invoiceUrl,tariff,email,username,method,amount}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"b\",{children:\"\\u0422\\u0430\\u0440\\u0438\\u0444:\"}),\" \",tariff===null||tariff===void 0?void 0:tariff.label,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"\\u0421\\u0443\\u043C\\u043C\\u0430:\"}),\" \",amount,\"\\u20BD\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"\\u0421\\u043F\\u043E\\u0441\\u043E\\u0431 \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B:\"}),\" \",method==='card'?'Картой':method==='crypto'?'Крипта':'Telegram Stars',/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Username:\"}),\" @\",username,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Email:\"}),\" \",email]}),method==='stars'?/*#__PURE__*/_jsxs(\"div\",{style:{margin:'16px 0',color:'#ff0'},children:[\"\\u0414\\u043B\\u044F \\u043E\\u043F\\u043B\\u0430\\u0442\\u044B \\u0432 \\u0437\\u0432\\u0451\\u0437\\u0434\\u0430\\u0445: \",/*#__PURE__*/_jsx(\"b\",{children:Math.ceil(amount/2)}),\" \\u2B50 (\\u043A\\u0443\\u0440\\u0441 1 \\u0437\\u0432\\u0435\\u0437\\u0434\\u0430 \\u2248 2\\u20BD)\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u041F\\u0435\\u0440\\u0435\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0437\\u0432\\u0451\\u0437\\u0434\\u044B \\u0447\\u0435\\u0440\\u0435\\u0437 Telegram \\u0438 \\u043D\\u0430\\u043F\\u0438\\u0448\\u0438\\u0442\\u0435 \\u0432 \\u043F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0443.\"]}):/*#__PURE__*/_jsx(\"a\",{href:invoiceUrl,target:\"_blank\",rel:\"noopener noreferrer\",style:{...btnStyle,display:'inline-block',marginBottom:16},children:\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setScreen('pay'),style:btnStyle,children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})})]});}function ChatScreen(_ref4){let{setScreen,user,t}=_ref4;const[messages,setMessages]=useState([]);const[input,setInput]=useState('');const[file,setFile]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');useEffect(()=>{if(!user)return;fetch(`http://localhost:8000/questions?user_id=${user.id}`).then(r=>r.json()).then(setMessages).catch(()=>setMessages([]));},[user]);const sendMessage=async()=>{if(!input&&!file)return;setLoading(true);setError('');let file_url=null;if(file){const form=new FormData();form.append('file',file);try{const resp=await fetch('http://localhost:8000/questions/upload',{method:'POST',body:form});const data=await resp.json();file_url=data.file_url;}catch{setError('Ошибка загрузки файла');setLoading(false);return;}}const body={user_id:user.id,username:user.username||'',message:input,file_url,email:'',is_admin:false,created_at:new Date().toISOString()};try{await fetch('http://localhost:8000/questions',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});setInput('');setFile(null);// Обновить сообщения\nfetch(`http://localhost:8000/questions?user_id=${user.id}`).then(r=>r.json()).then(setMessages);}catch{setError('Ошибка отправки');}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',height:'70vh'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041E\\u0431\\u0440\\u0430\\u0442\\u043D\\u0430\\u044F \\u0441\\u0432\\u044F\\u0437\\u044C\"}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:'auto',background:'#23272f',borderRadius:12,padding:12,marginBottom:12},children:[messages.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#888'},children:\"\\u041D\\u0435\\u0442 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439\"}),messages.map((msg,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12,textAlign:msg.answer?'left':'right'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:15,color:'#fff'},children:msg.message}),msg.file_url&&/*#__PURE__*/_jsx(\"a\",{href:msg.file_url,target:\"_blank\",rel:\"noopener noreferrer\",style:{color:'#0af'},children:\"\\u0412\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,color:'#aaa'},children:new Date(msg.created_at).toLocaleString()}),msg.answer&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#1a3',color:'#fff',borderRadius:8,padding:8,marginTop:6},children:[\"\\u041E\\u0442\\u0432\\u0435\\u0442: \",msg.answer]})]},i))]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{value:input,onChange:e=>setInput(e.target.value),style:{...inputStyle,flex:1},placeholder:\"\\u0412\\u0430\\u0448 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441...\",disabled:loading}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>setFile(e.target.files[0]),style:{color:'#fff'},disabled:loading}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,style:btnStyle,disabled:loading||!input&&!file,children:loading?'...':'Отправить'})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginTop:8},children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setScreen('main'),style:{...btnStyle,marginTop:16},children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})]});}function AdminPanel(_ref5){let{setScreen,user,t}=_ref5;const[users,setUsers]=useState([]);const[selectedUser,setSelectedUser]=useState(null);const[messages,setMessages]=useState([]);const[answer,setAnswer]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');useEffect(()=>{fetch('http://localhost:8000/questions?admin=true').then(r=>r.json()).then(data=>{// Собираем уникальных пользователей\nconst usersMap={};data.forEach(q=>{if(!usersMap[q.user_id]){usersMap[q.user_id]={user_id:q.user_id,username:q.username};}});setUsers(Object.values(usersMap));});},[]);useEffect(()=>{if(!selectedUser)return;fetch(`http://localhost:8000/questions?user_id=${selectedUser.user_id}&admin=true`).then(r=>r.json()).then(setMessages);},[selectedUser]);const sendAnswer=async()=>{if(!answer||!selectedUser)return;setLoading(true);setError('');try{await fetch('http://localhost:8000/questions/answer',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user_id:selectedUser.user_id,answer})});setAnswer('');// Обновить сообщения\nfetch(`http://localhost:8000/questions?user_id=${selectedUser.user_id}&admin=true`).then(r=>r.json()).then(setMessages);}catch{setError('Ошибка отправки');}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',height:'70vh',gap:16},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:220,background:'#23272f',borderRadius:12,padding:12,overflowY:'auto'},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0438\"}),users.map(u=>/*#__PURE__*/_jsxs(\"div\",{style:{margin:'8px 0',cursor:'pointer',color:(selectedUser===null||selectedUser===void 0?void 0:selectedUser.user_id)===u.user_id?'#0af':'#fff'},onClick:()=>setSelectedUser(u),children:[\"@\",u.username||u.user_id]},u.user_id))]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,background:'#23272f',borderRadius:12,padding:12,display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0414\\u0438\\u0430\\u043B\\u043E\\u0433\"}),selectedUser?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:'auto',marginBottom:12},children:[messages.length===0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#888'},children:\"\\u041D\\u0435\\u0442 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439\"}),messages.map((msg,i)=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12,textAlign:msg.answer?'left':'right'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:15,color:'#fff'},children:msg.message}),msg.file_url&&/*#__PURE__*/_jsx(\"a\",{href:msg.file_url,target:\"_blank\",rel:\"noopener noreferrer\",style:{color:'#0af'},children:\"\\u0412\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:13,color:'#aaa'},children:new Date(msg.created_at).toLocaleString()}),msg.answer&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#1a3',color:'#fff',borderRadius:8,padding:8,marginTop:6},children:[\"\\u041E\\u0442\\u0432\\u0435\\u0442: \",msg.answer]})]},i))]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,alignItems:'center'},children:[/*#__PURE__*/_jsx(\"input\",{value:answer,onChange:e=>setAnswer(e.target.value),style:{...inputStyle,flex:1},placeholder:\"\\u041E\\u0442\\u0432\\u0435\\u0442 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044E...\",disabled:loading}),/*#__PURE__*/_jsx(\"button\",{onClick:sendAnswer,style:btnStyle,disabled:loading||!answer,children:loading?'...':'Ответить'})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginTop:8},children:error})]}):/*#__PURE__*/_jsx(\"div\",{style:{color:'#888'},children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setScreen('main'),style:{...btnStyle,height:40,alignSelf:'flex-start'},children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})]});}const btnStyle={background:'#23272f',color:'#fff',border:'none',borderRadius:12,padding:'14px 20px',fontSize:18,marginBottom:4,cursor:'pointer',marginTop:0};const inputStyle={background:'#23272f',color:'#fff',border:'1px solid #333',borderRadius:8,padding:'10px 14px',fontSize:16,width:'100%',marginTop:4};export default App;","map":{"version":3,"names":["React","useEffect","useState","useTranslation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","screens","main","pay","confirm","chat","admin","App","t","i18n","screen","setScreen","user","setUser","window","Telegram","WebApp","_window$Telegram$WebA","tgUser","initDataUnsafe","language_code","changeLanguage","slice","content","MainMenu","PayScreen","ChatScreen","AdminPanel","name","ConfirmScreen","props","style","background","minHeight","color","borderRadius","padding","fontFamily","children","display","alignItems","marginBottom","src","alt","width","height","marginRight","margin","_ref","flexDirection","gap","onClick","btnStyle","href","target","rel","includes","id","_ref2","tariff","setTariff","method","setMethod","email","setEmail","loading","setLoading","error","setError","invoiceUrl","setInvoiceUrl","tariffs","key","label","amount","methods","handlePay","_data$data","match","selectedTariff","find","username","resp","fetch","headers","body","JSON","stringify","order_id","Date","now","data","json","url","e","map","tar","type","value","checked","onChange","m","disabled","inputStyle","placeholder","marginTop","_ref3","Math","ceil","_ref4","messages","setMessages","input","setInput","file","setFile","then","r","catch","sendMessage","file_url","form","FormData","append","user_id","message","is_admin","created_at","toISOString","flex","overflowY","length","msg","i","textAlign","answer","fontSize","toLocaleString","files","_ref5","users","setUsers","selectedUser","setSelectedUser","setAnswer","usersMap","forEach","q","Object","values","sendAnswer","u","cursor","alignSelf","border"],"sources":["/Users/offspring/Desktop/bot+miniapps/miniapp/src/App.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport './i18n';\n\nconst screens = {\n  main: 'main',\n  pay: 'pay',\n  confirm: 'confirm',\n  chat: 'chat',\n  admin: 'admin',\n};\n\nfunction App() {\n  const { t, i18n } = useTranslation();\n  const [screen, setScreen] = useState(screens.main);\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    // Получаем данные пользователя из Telegram WebApp\n    if (window.Telegram && window.Telegram.WebApp) {\n      const tgUser = window.Telegram.WebApp.initDataUnsafe?.user;\n      setUser(tgUser);\n      if (tgUser?.language_code) {\n        i18n.changeLanguage(tgUser.language_code.slice(0, 2));\n      }\n    }\n  }, [i18n]);\n\n  let content;\n  if (typeof screen === 'string') {\n    if (screen === screens.main) content = <MainMenu setScreen={setScreen} user={user} t={t} />;\n    if (screen === screens.pay) content = <PayScreen setScreen={setScreen} user={user} t={t} />;\n    if (screen === screens.chat) content = <ChatScreen setScreen={setScreen} user={user} t={t} />;\n    if (screen === screens.admin) content = <AdminPanel setScreen={setScreen} user={user} t={t} />;\n  } else if (screen?.name === 'confirm') {\n    content = <ConfirmScreen setScreen={setScreen} user={user} t={t} {...screen.props} />;\n  }\n  return (\n    <div style={{ background: '#18191c', minHeight: '100vh', color: '#fff', borderRadius: 16, padding: 24, fontFamily: 'inherit' }}>\n      <header style={{ display: 'flex', alignItems: 'center', marginBottom: 24 }}>\n        <img src=\"/miniappsava.png\" alt=\"logo\" style={{ width: 40, height: 40, borderRadius: 12, marginRight: 12 }} />\n        <h2 style={{ margin: 0 }}>CATALYST CLUB</h2>\n      </header>\n      {content}\n    </div>\n  );\n}\n\nfunction MainMenu({ setScreen, user, t }) {\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', gap: 16 }}>\n      <button onClick={() => setScreen('pay')} style={btnStyle}>{t('Оплатить доступ') || 'Оплатить доступ'}</button>\n      <button onClick={() => setScreen('chat')} style={btnStyle}>{t('Задать вопрос') || 'Задать вопрос'}</button>\n      <a href=\"/ОФЕРТА.pdf\" target=\"_blank\" rel=\"noopener noreferrer\" style={btnStyle}>{t('Договор оферты') || 'Договор оферты'}</a>\n      {user && [708907063, 7365307696].includes(user.id) && (\n        <button onClick={() => setScreen('admin')} style={btnStyle}>Админ-панель</button>\n      )}\n    </div>\n  );\n}\n\nfunction PayScreen({ setScreen, user, t }) {\n  const [tariff, setTariff] = useState('1m');\n  const [method, setMethod] = useState('card');\n  const [email, setEmail] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [invoiceUrl, setInvoiceUrl] = useState('');\n\n  const tariffs = [\n    { key: '1m', label: '1 месяц — 1500₽', amount: 1500 },\n    { key: '6m', label: '6 месяцев — 8000₽', amount: 8000 },\n    { key: '12m', label: '12 месяцев — 10000₽', amount: 10000 },\n  ];\n\n  const methods = [\n    { key: 'card', label: 'Картой (любая валюта)' },\n    { key: 'crypto', label: 'Крипта (только 6/12 мес)' },\n    { key: 'stars', label: 'Оплата в звездах Telegram' },\n  ];\n\n  // Передаю invoiceUrl, тариф, email, username, method, сумму в ConfirmScreen через setScreen\n  const handlePay = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      if (!email.match(/^[^@]+@[^@]+\\.[^@]+$/)) {\n        setError('Введите корректный email');\n        setLoading(false);\n        return;\n      }\n      const selectedTariff = tariffs.find(t => t.key === tariff);\n      if (method === 'stars') {\n        setScreen({\n          name: 'confirm',\n          props: {\n            invoiceUrl: '',\n            tariff: selectedTariff,\n            email,\n            username: user?.username || '',\n            method,\n            amount: selectedTariff.amount,\n          }\n        });\n        setLoading(false);\n        return;\n      }\n      // Запрос на backend для создания инвойса LAVA\n      const resp = await fetch('http://localhost:8000/lava/create_invoice', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          amount: selectedTariff.amount,\n          order_id: `${user?.id}_${Date.now()}`,\n          email,\n          username: user?.username || '',\n          tariff,\n          method,\n        })\n      });\n      const data = await resp.json();\n      if (data?.data?.url) {\n        setScreen({\n          name: 'confirm',\n          props: {\n            invoiceUrl: data.data.url,\n            tariff: selectedTariff,\n            email,\n            username: user?.username || '',\n            method,\n            amount: selectedTariff.amount,\n          }\n        });\n      } else {\n        setError('Ошибка создания инвойса');\n      }\n    } catch (e) {\n      setError('Ошибка оплаты');\n    }\n    setLoading(false);\n  };\n\n  return <div>\n    <h3>Оплата доступа</h3>\n    <div style={{ marginBottom: 12 }}>\n      <div>Тариф:</div>\n      {tariffs.map(tar => (\n        <label key={tar.key} style={{ display: 'block', margin: '6px 0' }}>\n          <input type=\"radio\" name=\"tariff\" value={tar.key} checked={tariff === tar.key} onChange={() => setTariff(tar.key)} /> {tar.label}\n        </label>\n      ))}\n    </div>\n    <div style={{ marginBottom: 12 }}>\n      <div>Способ оплаты:</div>\n      {methods.map(m => (\n        <label key={m.key} style={{ display: 'block', margin: '6px 0', color: (tariff === '1m' && m.key === 'crypto') ? '#888' : '#fff' }}>\n          <input type=\"radio\" name=\"method\" value={m.key} checked={method === m.key} onChange={() => setMethod(m.key)} disabled={tariff === '1m' && m.key === 'crypto'} /> {m.label}\n        </label>\n      ))}\n    </div>\n    <div style={{ marginBottom: 12 }}>\n      <div>Ваш Telegram Username:</div>\n      <input value={user?.username || ''} disabled style={inputStyle} />\n    </div>\n    <div style={{ marginBottom: 12 }}>\n      <div>Email (обязательно):</div>\n      <input value={email} onChange={e => setEmail(e.target.value)} style={inputStyle} placeholder=\"you@email.com\" />\n    </div>\n    {error && <div style={{ color: 'red', marginBottom: 8 }}>{error}</div>}\n    <div style={{ display: 'flex', gap: 8, marginTop: 16 }}>\n      <button onClick={() => setScreen('chat')} style={btnStyle}>Задать вопрос</button>\n      <a href=\"/ОФЕРТА.pdf\" target=\"_blank\" rel=\"noopener noreferrer\" style={btnStyle}>Договор оферты</a>\n    </div>\n    <div style={{ display: 'flex', gap: 8, marginTop: 16 }}>\n      <button onClick={() => setScreen('main')} style={btnStyle}>Назад</button>\n      <button onClick={handlePay} style={btnStyle} disabled={loading}>{loading ? '...' : 'Далее'}</button>\n    </div>\n  </div>;\n}\n\nfunction ConfirmScreen({ setScreen, user, t, invoiceUrl, tariff, email, username, method, amount }) {\n  return <div>\n    <h3>Подтверждение</h3>\n    <div style={{ marginBottom: 12 }}>\n      <b>Тариф:</b> {tariff?.label}<br />\n      <b>Сумма:</b> {amount}₽<br />\n      <b>Способ оплаты:</b> {method === 'card' ? 'Картой' : method === 'crypto' ? 'Крипта' : 'Telegram Stars'}<br />\n      <b>Username:</b> @{username}<br />\n      <b>Email:</b> {email}\n    </div>\n    {method === 'stars' ? (\n      <div style={{ margin: '16px 0', color: '#ff0' }}>\n        Для оплаты в звёздах: <b>{Math.ceil(amount / 2)}</b> ⭐ (курс 1 звезда ≈ 2₽)<br />\n        Переведите звёзды через Telegram и напишите в поддержку.\n      </div>\n    ) : (\n      <a href={invoiceUrl} target=\"_blank\" rel=\"noopener noreferrer\" style={{ ...btnStyle, display: 'inline-block', marginBottom: 16 }}>Оплатить</a>\n    )}\n    <div>\n      <button onClick={() => setScreen('pay')} style={btnStyle}>Назад</button>\n    </div>\n  </div>;\n}\n\nfunction ChatScreen({ setScreen, user, t }) {\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [file, setFile] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    if (!user) return;\n    fetch(`http://localhost:8000/questions?user_id=${user.id}`)\n      .then(r => r.json())\n      .then(setMessages)\n      .catch(() => setMessages([]));\n  }, [user]);\n\n  const sendMessage = async () => {\n    if (!input && !file) return;\n    setLoading(true);\n    setError('');\n    let file_url = null;\n    if (file) {\n      const form = new FormData();\n      form.append('file', file);\n      try {\n        const resp = await fetch('http://localhost:8000/questions/upload', {\n          method: 'POST',\n          body: form\n        });\n        const data = await resp.json();\n        file_url = data.file_url;\n      } catch {\n        setError('Ошибка загрузки файла');\n        setLoading(false);\n        return;\n      }\n    }\n    const body = {\n      user_id: user.id,\n      username: user.username || '',\n      message: input,\n      file_url,\n      email: '',\n      is_admin: false,\n      created_at: new Date().toISOString(),\n    };\n    try {\n      await fetch('http://localhost:8000/questions', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(body)\n      });\n      setInput('');\n      setFile(null);\n      // Обновить сообщения\n      fetch(`http://localhost:8000/questions?user_id=${user.id}`)\n        .then(r => r.json())\n        .then(setMessages);\n    } catch {\n      setError('Ошибка отправки');\n    }\n    setLoading(false);\n  };\n\n  return <div style={{ display: 'flex', flexDirection: 'column', height: '70vh' }}>\n    <h3>Обратная связь</h3>\n    <div style={{ flex: 1, overflowY: 'auto', background: '#23272f', borderRadius: 12, padding: 12, marginBottom: 12 }}>\n      {messages.length === 0 && <div style={{ color: '#888' }}>Нет сообщений</div>}\n      {messages.map((msg, i) => (\n        <div key={i} style={{ marginBottom: 12, textAlign: msg.answer ? 'left' : 'right' }}>\n          <div style={{ fontSize: 15, color: '#fff' }}>{msg.message}</div>\n          {msg.file_url && <a href={msg.file_url} target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#0af' }}>Вложение</a>}\n          <div style={{ fontSize: 13, color: '#aaa' }}>{new Date(msg.created_at).toLocaleString()}</div>\n          {msg.answer && <div style={{ background: '#1a3', color: '#fff', borderRadius: 8, padding: 8, marginTop: 6 }}>Ответ: {msg.answer}</div>}\n        </div>\n      ))}\n    </div>\n    <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\n      <input\n        value={input}\n        onChange={e => setInput(e.target.value)}\n        style={{ ...inputStyle, flex: 1 }}\n        placeholder=\"Ваш вопрос...\"\n        disabled={loading}\n      />\n      <input type=\"file\" onChange={e => setFile(e.target.files[0])} style={{ color: '#fff' }} disabled={loading} />\n      <button onClick={sendMessage} style={btnStyle} disabled={loading || (!input && !file)}>\n        {loading ? '...' : 'Отправить'}\n      </button>\n    </div>\n    {error && <div style={{ color: 'red', marginTop: 8 }}>{error}</div>}\n    <button onClick={() => setScreen('main')} style={{ ...btnStyle, marginTop: 16 }}>Назад</button>\n  </div>;\n}\n\nfunction AdminPanel({ setScreen, user, t }) {\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [answer, setAnswer] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    fetch('http://localhost:8000/questions?admin=true')\n      .then(r => r.json())\n      .then(data => {\n        // Собираем уникальных пользователей\n        const usersMap = {};\n        data.forEach(q => {\n          if (!usersMap[q.user_id]) {\n            usersMap[q.user_id] = { user_id: q.user_id, username: q.username };\n          }\n        });\n        setUsers(Object.values(usersMap));\n      });\n  }, []);\n\n  useEffect(() => {\n    if (!selectedUser) return;\n    fetch(`http://localhost:8000/questions?user_id=${selectedUser.user_id}&admin=true`)\n      .then(r => r.json())\n      .then(setMessages);\n  }, [selectedUser]);\n\n  const sendAnswer = async () => {\n    if (!answer || !selectedUser) return;\n    setLoading(true);\n    setError('');\n    try {\n      await fetch('http://localhost:8000/questions/answer', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ user_id: selectedUser.user_id, answer })\n      });\n      setAnswer('');\n      // Обновить сообщения\n      fetch(`http://localhost:8000/questions?user_id=${selectedUser.user_id}&admin=true`)\n        .then(r => r.json())\n        .then(setMessages);\n    } catch {\n      setError('Ошибка отправки');\n    }\n    setLoading(false);\n  };\n\n  return <div style={{ display: 'flex', height: '70vh', gap: 16 }}>\n    <div style={{ width: 220, background: '#23272f', borderRadius: 12, padding: 12, overflowY: 'auto' }}>\n      <h4>Пользователи</h4>\n      {users.map(u => (\n        <div key={u.user_id} style={{ margin: '8px 0', cursor: 'pointer', color: selectedUser?.user_id === u.user_id ? '#0af' : '#fff' }} onClick={() => setSelectedUser(u)}>\n          @{u.username || u.user_id}\n        </div>\n      ))}\n    </div>\n    <div style={{ flex: 1, background: '#23272f', borderRadius: 12, padding: 12, display: 'flex', flexDirection: 'column' }}>\n      <h4>Диалог</h4>\n      {selectedUser ? (\n        <>\n          <div style={{ flex: 1, overflowY: 'auto', marginBottom: 12 }}>\n            {messages.length === 0 && <div style={{ color: '#888' }}>Нет сообщений</div>}\n            {messages.map((msg, i) => (\n              <div key={i} style={{ marginBottom: 12, textAlign: msg.answer ? 'left' : 'right' }}>\n                <div style={{ fontSize: 15, color: '#fff' }}>{msg.message}</div>\n                {msg.file_url && <a href={msg.file_url} target=\"_blank\" rel=\"noopener noreferrer\" style={{ color: '#0af' }}>Вложение</a>}\n                <div style={{ fontSize: 13, color: '#aaa' }}>{new Date(msg.created_at).toLocaleString()}</div>\n                {msg.answer && <div style={{ background: '#1a3', color: '#fff', borderRadius: 8, padding: 8, marginTop: 6 }}>Ответ: {msg.answer}</div>}\n              </div>\n            ))}\n          </div>\n          <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\n            <input\n              value={answer}\n              onChange={e => setAnswer(e.target.value)}\n              style={{ ...inputStyle, flex: 1 }}\n              placeholder=\"Ответ пользователю...\"\n              disabled={loading}\n            />\n            <button onClick={sendAnswer} style={btnStyle} disabled={loading || !answer}>\n              {loading ? '...' : 'Ответить'}\n            </button>\n          </div>\n          {error && <div style={{ color: 'red', marginTop: 8 }}>{error}</div>}\n        </>\n      ) : <div style={{ color: '#888' }}>Выберите пользователя</div>}\n    </div>\n    <button onClick={() => setScreen('main')} style={{ ...btnStyle, height: 40, alignSelf: 'flex-start' }}>Назад</button>\n  </div>;\n}\n\nconst btnStyle = {\n  background: '#23272f',\n  color: '#fff',\n  border: 'none',\n  borderRadius: 12,\n  padding: '14px 20px',\n  fontSize: 18,\n  marginBottom: 4,\n  cursor: 'pointer',\n  marginTop: 0,\n};\n\nconst inputStyle = {\n  background: '#23272f',\n  color: '#fff',\n  border: '1px solid #333',\n  borderRadius: 8,\n  padding: '10px 14px',\n  fontSize: 16,\n  width: '100%',\n  marginTop: 4,\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}